<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="向着高远支撑起生命和灵魂">
<meta property="og:type" content="website">
<meta property="og:title" content="闪烁微光的部落阁">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="闪烁微光的部落阁">
<meta property="og:description" content="向着高远支撑起生命和灵魂">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="闪烁微光">
<meta property="article:tag" content="闪烁微光的部落阁">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>闪烁微光的部落阁</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">闪烁微光的部落阁</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/06/%E7%BB%93%E6%9E%84%E5%8C%96%E8%AE%BE%E8%AE%A1%EF%BC%9A%E6%80%BB%E4%BD%93%E8%AE%BE%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="闪烁微光">
      <meta itemprop="description" content="向着高远支撑起生命和灵魂">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="闪烁微光的部落阁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/06/%E7%BB%93%E6%9E%84%E5%8C%96%E8%AE%BE%E8%AE%A1%EF%BC%9A%E6%80%BB%E4%BD%93%E8%AE%BE%E8%AE%A1/" class="post-title-link" itemprop="url">结构化设计：总体设计</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-05-06 15:09:18" itemprop="dateCreated datePublished" datetime="2020-05-06T15:09:18+08:00">2020-05-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-07 08:57:28" itemprop="dateModified" datetime="2020-05-07T08:57:28+08:00">2020-05-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="结构化设计：总体设计"><a href="#结构化设计：总体设计" class="headerlink" title="结构化设计：总体设计"></a>结构化设计：总体设计</h1><h2 id="何谓设计"><a href="#何谓设计" class="headerlink" title="何谓设计"></a>何谓设计</h2><p>​    一种软件开发活动，定义实现需求规约所需的软件结构</p>
<p><strong>设计目标</strong>：依据需求规约，在一个抽象层上建立系统软件模型，包括软件体系结构（数据和程序结构），以及详细的处理算法，产生设计规格说明书</p>
<p>即：要回答如何解决问题-给出软件解决方案</p>
<p>结构化设计分为：</p>
<p><strong>总体设计</strong>：确定系统的整体模块结构，即系统实现所需要的软件模块以及这些模块之间的调用关系、</p>
<p><strong>详细设计</strong>：详细描述模块</p>
<p><strong>实现目标对结构化设计方法的需求</strong></p>
<ul>
<li>提供可体现“原理/原则”的一组术语（符号），形成一个特定的抽象层，用于表达设计中所使用的部件</li>
<li>依据术语所形成的空间，给出表达软件模型工具</li>
<li>给出设计的过程指导</li>
</ul>
<h2 id="结构化设计方法"><a href="#结构化设计方法" class="headerlink" title="结构化设计方法"></a>结构化设计方法</h2><p>在总体设计层：</p>
<ul>
<li>引入了两个术语/符号<ul>
<li>模块：一种可独立标识的软件成分，用矩形表示</li>
<li>调用：模块间的一种关系，模块A为了完成其任务必须依赖其他模块，用箭头表示</li>
</ul>
</li>
<li>引入了模块结构图（MSD），用于表达系统软件系统的静态结构 </li>
</ul>
<h3 id="过程指导"><a href="#过程指导" class="headerlink" title="过程指导"></a>过程指导</h3><p>​    为了实现设计目标，总体设计的具体任务是：将DFD转化为MSD，分两步实现。</p>
<ul>
<li><p>第一步：如何将DFD转化为初始的MSD</p>
<p>分类：变换型数据流图、事务型数据流图、变换设计、事务设计</p>
</li>
<li><p>第二步：如何将原始的MSD转化为最终可供详细设计使用的MSD</p>
</li>
</ul>
<h3 id="总体设计第一步"><a href="#总体设计第一步" class="headerlink" title="总体设计第一步"></a>总体设计第一步</h3><h4 id="数据流图的分类"><a href="#数据流图的分类" class="headerlink" title="数据流图的分类"></a>数据流图的分类</h4><h5 id="变换型数据流图"><a href="#变换型数据流图" class="headerlink" title="变换型数据流图"></a>变换型数据流图</h5><p>​    具有较明显的输入部分和变换部分之间的界面，变换部分和输出部分之间界面的数据流图</p>
<p>​    →获取数据→变换数据→输出数据→</p>
<ul>
<li>逻辑输入：离物理输入最远，仍被看成系统输入的数据流</li>
<li>逻辑输出：离物理输出最远，仍被看成系统输出的数据流</li>
</ul>
<h5 id="事务型数据流图"><a href="#事务型数据流图" class="headerlink" title="事务型数据流图"></a>事务型数据流图</h5><p>​    数据到达一个加工，该加工根据输入数据的值，在其后的若干动作序列（成为一个事务）中选出一个来执行，这类数据流图称为事务型数据流图。</p>
<ul>
<li>事务型DFD完成下述任务：<ul>
<li>接受输入数据</li>
<li>分析并确定对应的事务</li>
<li>选取与该事务对应的一条活动路径</li>
</ul>
</li>
<li>事务型DFD与变换型DFD的区别<ul>
<li>原则上所有DFD都可以看成是变换型DFD</li>
<li>一般而言，事务型数据流图接受1个输入数据，分成多条路径</li>
</ul>
</li>
</ul>
<h4 id="变换设计的基本步骤"><a href="#变换设计的基本步骤" class="headerlink" title="变换设计的基本步骤"></a>变换设计的基本步骤</h4><ul>
<li>第一步：设计准备，复审并精化系统模型<ul>
<li>为了确保系统的输入数据和输出数据符合实际情况而复审其语境</li>
<li>为了确保是否需要进一步精化系统的DFD图而复审其语境</li>
</ul>
</li>
<li>第二步：确定输入、变换、输出三部分之间的边界<ul>
<li>根据加工的语意和相关的数据流，确定系统的逻辑输入和逻辑输出</li>
</ul>
</li>
<li>第三步：第一级分解——系统模块结构图顶层和第一层的设计<ul>
<li>主模块：位于最顶层，一般以所建系统的名字命名，其任务是协调控制第一层模块</li>
<li>输入模块部分：为主模块提供加工数据，有几个逻辑输入就设计几个输入模块</li>
<li>变换模块部分，接受输入模块的输入，并对内部形式的数据加工，产生系统所有的内部输出数据</li>
<li>输出模块部分：将变换模块产生的输出数据，以用户可见的形式输出。有几个逻辑输出，就设计几个输出模块</li>
</ul>
</li>
<li>第四步：第二级分解——自顶向下，逐步求精<ul>
<li>对每一个输入模块设计其下层模块<ul>
<li>接收数据模块（即输入模块）</li>
<li>把接收数据变换成它的上级模块所需的数据（即变换模块）</li>
<li>直到输入模块为物理输入，则细化停止</li>
</ul>
</li>
<li>对每一个输出模块设计其下层模块<ul>
<li>将得到的数据向输出形式进行转换</li>
<li>将转化后的数据进行输出</li>
<li>直到输出模块是物理输出，则细化停止</li>
</ul>
</li>
</ul>
</li>
<li>对变化模块进行分解（无通用法则） </li>
</ul>
<h4 id="事务设计的基本步骤"><a href="#事务设计的基本步骤" class="headerlink" title="事务设计的基本步骤"></a>事务设计的基本步骤</h4><ul>
<li>第一步：设计准备，复审并精化系统模型<ul>
<li>为了确保系统的输入数据和输出数据符合实际情况而复审其语境</li>
<li>为了确保是否需要进一步精化系统的DFD图而复审其语境</li>
</ul>
</li>
<li>第二步：确定事务处理中心</li>
<li>第三步：第一级分解——系统模块结构图顶层和第一层的设计<ul>
<li>首先，为事务中心设计一个主模块</li>
<li>然后，为每一条活动路径设计一个事务处理模块</li>
<li>对其输入部分设计一个输入模块</li>
<li>如果一个事务数据流图的活动路径集中于一个加工，则设计一个输出模块，否则第一层不设计输出模块</li>
</ul>
</li>
<li>第四步：第二级分解——自顶向下，逐步求精<ul>
<li>对于输入模块、输出模块的细化，如同变化设计的细化过程</li>
<li>对各条路径模块的细化，无设计法则 </li>
</ul>
</li>
</ul>
<h2 id="总体设计第二步"><a href="#总体设计第二步" class="headerlink" title="总体设计第二步"></a>总体设计第二步</h2><p>​    将初始的MSD转化为最终可供详细设计使用的MSD</p>
<p>概念：模块、模块化。</p>
<p>基于模块化原理：高内聚、低耦合</p>
<p>给出设计规则—经验规则—启发式规则</p>
<p>用于精化初始的MSD，体现设计人员的创造</p>
<p><strong>模块</strong>：执行一个特殊任务的一组例程和数据结构</p>
<ul>
<li>接口：给出可由其他模块和例程访问的对象</li>
<li>实现：接口的实现（模块功能的执行机制）</li>
</ul>
<p><strong>模块化</strong>：把系统分解成若干模块的过程</p>
<h3 id="耦合"><a href="#耦合" class="headerlink" title="耦合"></a>耦合</h3><h4 id="耦合的强度所依赖的因素"><a href="#耦合的强度所依赖的因素" class="headerlink" title="耦合的强度所依赖的因素"></a>耦合的强度所依赖的因素</h4><ul>
<li>一个模块对另一个模块的引用</li>
<li>一个模块向另一个模块传递的数据量</li>
<li>一个模块施加到另一个模块的控制的数量</li>
<li>模块之间接口的复杂程度 </li>
</ul>
<h4 id="耦合的类型（由强到弱）"><a href="#耦合的类型（由强到弱）" class="headerlink" title="耦合的类型（由强到弱）"></a>耦合的类型（由强到弱）</h4><ul>
<li>内容耦合：一个模块直接修改或操作另一个模块的数据</li>
<li>公共耦合：两个以上的模块共同引用一个全局数据项</li>
<li>控制耦合：一个模块向另一个模块传递一个控制信号，接受信号的模块依据该信号进行必要的活动</li>
<li>标记耦合：两个模块至少有一个通过界面传递的公共参数包含内部结构，如数组，字符串等。</li>
<li>数据耦合：模块间通过参数传递基本类型的数据。</li>
</ul>
<p><strong>如果模块间必须存在耦合，就尽量使用数据耦合，少用控制耦合，限制公共耦合的范围，坚决避免使用内容耦合</strong></p>
<h3 id="内聚"><a href="#内聚" class="headerlink" title="内聚"></a>内聚</h3><p><strong>定义</strong>：一个模块之内各成分之间相互依赖程度的度量</p>
<p><strong>好的设计</strong>：</p>
<ul>
<li>模块功能单一</li>
<li>模块的各部分都和模块的功能直接相关</li>
<li>高内聚</li>
</ul>
<h4 id="内聚类型（由低到高）"><a href="#内聚类型（由低到高）" class="headerlink" title="内聚类型（由低到高）"></a>内聚类型（由低到高）</h4><ul>
<li>偶然内聚：一个模块之内各成分之间没有任何关系</li>
<li>逻辑内聚：几个逻辑上相关的功能放在同一模块中</li>
<li>时间内聚：一个模块完成的功能必须在同一时间内完成，而这些功能只是因为时间因素关联在一起</li>
<li>过程内聚：处理成分必须以特定的次序执行</li>
<li>通信内聚：各成分偶操作在同一数据集或生成泳衣数据集</li>
<li>顺序内聚：各成分与一个功能相关，且一个成分的输出作为另一成分的输入</li>
<li>功能内聚：模块的所有成分对完成单一功能是最基本的，且模块对完成这一功能而言是充分必要的</li>
</ul>
<h3 id="启发式规则"><a href="#启发式规则" class="headerlink" title="启发式规则"></a>启发式规则</h3><p>​        根据设计准则，从长期的软件开发实践中，总结出来的规则，既不是设计目标，也不是设计时应普遍遵循的原理</p>
<p><strong>常用的六种启发式规则</strong></p>
<ul>
<li>改进软件结构，提高模块独立性：<ul>
<li>通过模块的分解和合并，降低耦合，提高内聚</li>
</ul>
</li>
<li>模块规模适中—每页60行语句：模块最好能写在一张纸内（60行）<ul>
<li>方法<ul>
<li>进一步分解过大的模块</li>
<li>将频繁调用的小模块合并到上级大模块中</li>
</ul>
</li>
</ul>
</li>
<li>深度、宽度、扇入和扇出适中<ul>
<li>深度：软件结构中控制的层数，标示一个系统的大小和复杂程度</li>
<li>宽度：软件结构中同一个层次上的模块总数的最大值，宽度越大的系统越复杂</li>
<li>扇入：表示有多少个上级模块直接调用它<ul>
<li>一般而言，扇入越大说明共享该模块的上级模块越多</li>
<li>不违背模块独立性的条件下，扇入越大越好</li>
</ul>
</li>
<li>扇出：一个模块直接控制（调用）的下级模块数目<ul>
<li>扇出过大意味着模块功能过分复杂</li>
<li>扇出过小意味着功能过度集中</li>
<li>典型的扇出是3或4（上限5-9）</li>
<li>好的系统：顶层扇出高，中层扇出少，底层扇入高，系统成“葫芦”型</li>
</ul>
</li>
</ul>
</li>
<li>模块的作用于力争在控制域之内<ul>
<li>作用域：受该模块内一个判定影响的所有模块的集合</li>
<li>控制域：模块本身和所有直接或间接从属于它的模块的集合</li>
</ul>
</li>
<li>降低模块接口的复杂性</li>
<li>模块功能应该可以预测</li>
</ul>
<h2 id="总体设计总结"><a href="#总体设计总结" class="headerlink" title="总体设计总结"></a>总体设计总结</h2><ul>
<li>将一个给定的DFD转换为初始的模块结构图<ul>
<li>基本上是机械的过程</li>
<li>一般不能体现设计人员的创造力</li>
</ul>
</li>
<li>优化设计<ul>
<li>将一个初始的模块结构图转换为最终的模块结构图</li>
<li>对设计人员将是一种挑战</li>
<li>其结果将直接影响软件系统开发的质量</li>
</ul>
</li>
</ul>
<h2 id="补充：接口设计和数据设计"><a href="#补充：接口设计和数据设计" class="headerlink" title="补充：接口设计和数据设计"></a>补充：接口设计和数据设计</h2><p><strong>体系结构设计（MSD）</strong>：定义软件模块及其之间的关系，从分析模型（如数据流图）导出</p>
<p><strong>接口设计</strong>：包括外部接口设计和内部接口设计</p>
<ul>
<li>外部接口设计依据分析模型中的顶层数据流图，包括：<ul>
<li>用户界面</li>
<li>目标系统与其他硬件设备、软件系统的外部接口</li>
</ul>
</li>
<li>内部接口是指系统内部各种元素之间的接口</li>
</ul>
<p><strong>数据设计</strong>：根据数据字典来确定软件涉及的文件系统的结构及数据库的表结构</p>
<h3 id="接口设计"><a href="#接口设计" class="headerlink" title="接口设计"></a>接口设计</h3><h4 id="接口设计的分类"><a href="#接口设计的分类" class="headerlink" title="接口设计的分类"></a>接口设计的分类</h4><ul>
<li><p>模块或软件构件之间的接口设计</p>
</li>
<li><p>软件与其他软硬件系统之间的接口设计</p>
</li>
<li><p>软件与人（用户）之间的交互设计</p>
<p>​    系统的接口设计（包括用户界面设计及与其他系统的接口设计）是由穿过系统边界的数据流定义的</p>
<p>​    在最终的系统中，数据流将成为用户界面中的表单、报表或与其他系统进行交互的文件或通信</p>
</li>
</ul>
<h4 id="人机交互界面"><a href="#人机交互界面" class="headerlink" title="人机交互界面"></a>人机交互界面</h4><p>​    在设计阶段，必须根据需求把交互细节加入到用户界面设计中，包括人机交互所必须的实际显示和输入。</p>
<p>​    人机交互界面是给用户使用的，为了设计好人机交互界面，设计者需要了解以下信息：</p>
<ul>
<li>用户界面应具有的特性？</li>
<li>使用软件的用户是什么人？</li>
<li>用户怎样学习与新的计算机系统进行交互？</li>
<li>用户需要完成哪些工作？</li>
</ul>
<h5 id="用户界面应具备的特性"><a href="#用户界面应具备的特性" class="headerlink" title="用户界面应具备的特性"></a>用户界面应具备的特性</h5><ul>
<li>可使用性：是用户界面设计最重要的目标，包括使用简单、界面一致、拥有帮助功能，快速的系统响应和低的系统成本，具有容错能力等</li>
<li>灵活性：考虑到用户的特点、能力和知识水平，应该使用户接口满足不同用户的要求。因此，对于不同的用户，应有不同的界面形式，但不同的界面形式不应影响任务的完成</li>
<li>可靠性：用户界面的可靠性是指无故障使用的间隔时间，用户界面应能保证用户正确、可靠地使用系统，保证有关程序和数据的安全性</li>
</ul>
<h5 id="用户类型"><a href="#用户类型" class="headerlink" title="用户类型"></a>用户类型</h5><ul>
<li>外行型：对计算机系统认知很少或毫无了解</li>
<li>初学型：对计算机有一定经验，对系统的认识不足或经验很少，需要很多界面支持</li>
<li>熟练型：对一个系统有很多经验，需要较少的界面支持，但不能处理意外错误</li>
<li>专家型：了解系统的内部构造，需要为他们提供能够修改和扩充系统能力的复杂界面</li>
</ul>
<h5 id="界面设计类型"><a href="#界面设计类型" class="headerlink" title="界面设计类型"></a>界面设计类型</h5><p>​    如果从用户与计算机交互的角度来看，用户界面设计类型主要有：问题描述语言、数据表格、图形、菜单、对话、窗口等。在选择界面形式时，应考虑每种类型的优点和限制，可以从以下几个方面来考察，进行选择</p>
<ul>
<li>使用的难易程度</li>
<li>学习的难易程度</li>
<li>操作速度</li>
<li>复杂程度：该界面提供了什么功能，能否用新的方式组合这些功能以增强界面的功能</li>
<li>控制：人机交互时，由计算机还是由人发起和控制对话</li>
<li>开发的难易程度：该界面设计是否有难度、开发工作量有多大</li>
</ul>
<p><strong>一个界面的设计通常使用一种以上的设计类型，每种类型与一个或一组任务相匹配</strong></p>
<h5 id="设计详细的交互"><a href="#设计详细的交互" class="headerlink" title="设计详细的交互"></a>设计详细的交互</h5><p>原则：</p>
<ul>
<li>一致性</li>
<li>操作步骤少</li>
<li>不要“哑播放”</li>
<li>提供Undo功能</li>
<li>减少人脑的记忆负担</li>
<li>提高学习效率</li>
</ul>
<h3 id="数据设计"><a href="#数据设计" class="headerlink" title="数据设计"></a>数据设计</h3><p>​    在设计阶段必须对要存储的数据及其格式进行设计</p>
<h3 id="文件设计"><a href="#文件设计" class="headerlink" title="文件设计"></a>文件设计</h3><p>​    以下几种情况适合于选择文件存储：</p>
<ul>
<li>数据量大的非结构化数据，如多媒体信息</li>
<li>数据量大、信息松散。如历史记录、档案文件等</li>
<li>非关系层次化数据，如系统配置文件</li>
<li>对数据的存取速度要求极高的情况</li>
<li>临时存放的数据</li>
</ul>
<p>文件设计的主要工作就是根据使用要求、处理方式、存储的信息量、数据的活动性以及所提供的设备条件等确定文件类型，选择文件媒体，决定文件组织方法，设计文件记录格式，并估算文件的容量</p>
<h3 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h3><p>​    在结构化设计中，很容易将结构化分析阶段建立的数据字典和实体-关系模型映射到关系型数据库中，包括：</p>
<ul>
<li>数据对象的映射</li>
<li>关系的映射</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/01/Springboot%E9%80%9A%E8%BF%87JWT%E5%AE%9E%E7%8E%B0%E7%99%BB%E9%99%86%E8%AE%A4%E8%AF%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="闪烁微光">
      <meta itemprop="description" content="向着高远支撑起生命和灵魂">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="闪烁微光的部落阁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/01/Springboot%E9%80%9A%E8%BF%87JWT%E5%AE%9E%E7%8E%B0%E7%99%BB%E9%99%86%E8%AE%A4%E8%AF%81/" class="post-title-link" itemprop="url">Springboot通过JWT实现登陆验证</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-05-01 18:21:54 / 修改时间：18:24:49" itemprop="dateCreated datePublished" datetime="2020-05-01T18:21:54+08:00">2020-05-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Springboot通过JWT实现登陆认证"><a href="#Springboot通过JWT实现登陆认证" class="headerlink" title="Springboot通过JWT实现登陆认证"></a>Springboot通过JWT实现登陆认证</h1><h3 id="JWT的定义"><a href="#JWT的定义" class="headerlink" title="JWT的定义"></a>JWT的定义</h3><blockquote>
<p>  Json web token (JWT), 是为了在网络应用环境间传递声明而执行的一种基于JSON的开放标准.该token被设计为紧凑且安全的，特别适用于分布式站点的单点登录（SSO）场景。JWT的声明一般被用来在身份提供者和服务提供者间传递被认证的用户身份信息，以便于从资源服务器获取资源，也可以增加一些额外的其它业务逻辑所必须的声明信息，该token也可直接被用于认证，也可被加密。</p>
</blockquote>
<h3 id="JWT的优点"><a href="#JWT的优点" class="headerlink" title="JWT的优点"></a>JWT的优点</h3><ul>
<li>体积小，易于传输</li>
<li>可包含自定义信息，服务器无需查询数据库验证信息</li>
<li>支持跨域验证，多用于单点登陆。单点登录指：在多个在多个应用系统中，用户只需登陆一次，就可以访问所有相互信任的应用。</li>
<li>JWT可用于在无状态的HTTP连接中实现状态</li>
</ul>
<h3 id="JWT的原理"><a href="#JWT的原理" class="headerlink" title="JWT的原理"></a>JWT的原理</h3><p>​    用户通过服务器认证后，服务器生成一个JSON对象，发送给用户，如</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"sub"</span>: <span class="string">"1234567890"</span>,</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"John Doe"</span>,</span><br><span class="line">  <span class="attr">"iat"</span>: <span class="number">1516239022</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    之后用户与服务端通信时，服务器完全只靠这个对象认证用户身份，为了防止数据篡改，给这个对象加上签名。</p>
<h3 id="JWT的结构"><a href="#JWT的结构" class="headerlink" title="JWT的结构"></a>JWT的结构</h3><p>JWT包含了三部分，以点<code>.</code>分隔</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJFbHZpcyJ9.5O75UhsYVH-yV24gSFIqme5qAdWPZEztybO2MDjTJPE</span><br><span class="line"># Header.Payload.Signature</span><br></pre></td></tr></table></figure>

<h4 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h4><p>一个描述JWT的元数据的JSON对象</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"alg"</span>: <span class="string">"HS256"</span>,</span><br><span class="line">  <span class="attr">"typ"</span>: <span class="string">"JWT"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>alg</code>属性表示签名的算法，默认为HS266</li>
</ul>
<h4 id="Payload"><a href="#Payload" class="headerlink" title="Payload"></a>Payload</h4><p>​    用来存放实际需要传送的数据，JWT规定了7个官方字段：</p>
<ul>
<li><p>iss (issuer)：签发人</p>
</li>
<li><p>exp (expiration time)：过期时间</p>
</li>
<li><p>sub (subject)：主题</p>
</li>
<li><p>aud (audience)：受众</p>
</li>
<li><p>nbf (Not Before)：生效时间</p>
</li>
<li><p>iat (Issued At)：签发时间</p>
</li>
<li><p>jti (JWT ID)：编号</p>
<p>在上面的例子中，是</p>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"sub"</span>: <span class="string">"1234567890"</span>,</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"John Doe"</span>,</span><br><span class="line">  <span class="attr">"iat"</span>: <span class="number">1516239022</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Signature"><a href="#Signature" class="headerlink" title="Signature"></a>Signature</h4><p>​    JWT的签名，用于防止数据篡改。对前两部分进行Base64编码后，服务器用Header中的算法（默认HMACSHA256）和自己的密钥生成签名。</p>
<p>​    生成签名后，将各部分连接，就生成了JWT。</p>
<h3 id="登陆认证过程"><a href="#登陆认证过程" class="headerlink" title="登陆认证过程"></a>登陆认证过程</h3><p>​    用户初次登陆，提交用户名和密码，系统查询数据库，验证用户名和密码的一致性，并生成一个JWT，这个JWT的Payload部分只有一个属性<code>&quot;aud&quot;:&quot;userName&quot;</code>，并且以用户的密码为密钥生成签名。生成的JWT形式如下</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJEZW1vIn0.h1xOcrF8xTqI3B_OUNb-jIUuwRnab97WSKXU8aOVwvE</span><br><span class="line"></span><br><span class="line">#Header</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"typ"</span>: <span class="string">"JWT"</span>,</span><br><span class="line">  <span class="attr">"alg"</span>: <span class="string">"HS256"</span></span><br><span class="line">&#125;</span><br><span class="line">#Payload</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"aud"</span>: <span class="string">"Demo"</span></span><br><span class="line">&#125;</span><br><span class="line">#Signature</span><br><span class="line">HMACSHA256(</span><br><span class="line">  base64UrlEncode(header) + "." +</span><br><span class="line">  base64UrlEncode(payload),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>​        用户第二次登陆时，在Header中携带Token，就能在系统的不同服务之间保持登陆状态。</p>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><h4 id="有关的自定义注解"><a href="#有关的自定义注解" class="headerlink" title="有关的自定义注解"></a>有关的自定义注解</h4><p><strong>@LoginToken</strong>:用于注解一个方法，表示这个方法需要登录才可以访问。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.METHOD,ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> LoginToken</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">required</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">true</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="持久层"><a href="#持久层" class="headerlink" title="持久层"></a>持久层</h4><p><strong>User</strong>:实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> userId;</span><br><span class="line">    String userName;</span><br><span class="line">    String password;</span><br><span class="line">    Boolean isAdmin;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="业务逻辑层"><a href="#业务逻辑层" class="headerlink" title="业务逻辑层"></a>业务逻辑层</h4><p><strong>UserService</strong>：通过Mybatis实现ORM，这里只用到了一个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">findByUserName</span><span class="params">(String userName)</span></span>;</span><br></pre></td></tr></table></figure>

<p><strong>LoginService</strong>：处理登陆的业务逻辑</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">LoginService</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  	<span class="comment">//生成Token</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">generateToken</span><span class="params">(User user)</span></span>;</span><br><span class="line">    <span class="comment">//登陆验证</span></span><br><span class="line">  	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verifyLogin</span><span class="params">(String token)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>LoginServiceImpl</strong>：实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServiceImpl</span> <span class="keyword">implements</span> <span class="title">LoginService</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">generateToken</span><span class="params">(User user)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        log.debug(<span class="string">"生成token"</span>);</span><br><span class="line">        <span class="keyword">return</span> JWT.create().</span><br><span class="line">                withAudience(user.getUserName()).</span><br><span class="line">                sign(Algorithm.HMAC256(user.getPassword()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verifyLogin</span><span class="params">(String token)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        log.info(<span class="string">"开始执行认证"</span>);</span><br><span class="line">        <span class="comment">//执行认证</span></span><br><span class="line">        <span class="keyword">if</span>(token == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"无token，请重新登陆"</span>);</span><br><span class="line">        <span class="comment">//获取用户名</span></span><br><span class="line">        String userName;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">          	<span class="comment">//获取Payload中的信息</span></span><br><span class="line">            userName = JWT.decode(token).getAudience().get(<span class="number">0</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JWTDecodeException j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"401"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      	<span class="comment">//从数据库中查出用户信息</span></span><br><span class="line">        User user = userService.findByUserName(userName);</span><br><span class="line">        <span class="keyword">if</span>(user == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"用户不存在"</span>);</span><br><span class="line">        log.info(<span class="string">"验证token"</span>);</span><br><span class="line">        JWTVerifier jwtVerifier = JWT.require(Algorithm.HMAC256(user.getPassword())).build();</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            jwtVerifier.verify(token);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (JWTVerificationException j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"401"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>LoginInterceptor</strong>：登陆拦截器，用于拦截请求并验证登陆</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    LoginService loginService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        log.info(<span class="string">"开始进入登陆拦截"</span>);</span><br><span class="line">      	<span class="comment">//从Header中获取token</span></span><br><span class="line">        String token = request.getHeader(<span class="string">"token"</span>);</span><br><span class="line">        <span class="comment">//不是映射方法直接跳过</span></span><br><span class="line">        <span class="keyword">if</span>(!(handler <span class="keyword">instanceof</span> HandlerMethod))</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">      	<span class="comment">//获取映射方法</span></span><br><span class="line">        HandlerMethod handlerMethod = (HandlerMethod)handler;</span><br><span class="line">        Method method =  handlerMethod.getMethod();</span><br><span class="line">        <span class="comment">//检查有没有需要用户权限的注解，如果有，则验证登陆</span></span><br><span class="line">        <span class="keyword">if</span>(method.isAnnotationPresent(LoginToken<span class="class">.<span class="keyword">class</span>))</span></span><br><span class="line"><span class="class">        </span>&#123;</span><br><span class="line">            LoginToken loginToken = method.getAnnotation(LoginToken<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">            <span class="keyword">if</span>(loginToken.required())</span><br><span class="line">                <span class="keyword">return</span> loginService.verifyLogin(token);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>LoginController</strong>:登陆控制器，响应请求</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    LoginService loginService;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">//处理登陆</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> HashMap&lt;String,Object&gt; <span class="title">login</span><span class="params">(@RequestBody User user)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        log.info(String.valueOf(user));</span><br><span class="line">        HashMap&lt;String,Object&gt; response = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        User userData = userService.findByUserName(user.getUserName());</span><br><span class="line">        <span class="keyword">if</span>(userData == <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            response.put(<span class="string">"message"</span>,<span class="string">"登陆失败，用户不存在"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(!user.getPassword().equals(userData.getPassword()))</span><br><span class="line">        &#123;</span><br><span class="line">            response.put(<span class="string">"message"</span>,<span class="string">"登陆失败，密码错误"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            String token = loginService.generateToken(userData);</span><br><span class="line">            log.info(<span class="string">"生成token："</span> + token);</span><br><span class="line">            response.put(<span class="string">"token"</span>,token);</span><br><span class="line">            response.put(<span class="string">"user"</span>,userData);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line">		</span><br><span class="line">  	<span class="comment">//这是一个登陆才可用的接口</span></span><br><span class="line">    <span class="meta">@LoginToken</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/message"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"通过验证"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><p>​    登陆逻辑中，可以使用缓存降低数据库的压力，如Redis等。</p>
<h3 id="补充：状态"><a href="#补充：状态" class="headerlink" title="补充：状态"></a>补充：状态</h3><blockquote>
<p>  状态：请求的状态是客户端与服务端交互过程中，保存的公共信息</p>
<p>  有状态API：服务端保存客户端的请求状态，通过客户端SessionID找到交互信息并应答。</p>
<p>  无状态API：每一个请求都是独立的，请求之间完全分离。客户端发送的请求必须包含能够让服务器理解请求的全部信息，包括自己的状态信息，使得一个客户端的Web请求能被任何可用服务器应答。</p>
</blockquote>
<p>有状态API的缺点：如果服务器宕机，其保存的状态信息就会丢失。在分布式Web系统中，在不同的服务器之间同步客户端的状态信息也会存在问题，无状态请求则没有这些缺点。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/28/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%96%B9%E6%B3%95%E5%AD%A6%EF%BC%9A%E7%BB%93%E6%9E%84%E5%8C%96%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="闪烁微光">
      <meta itemprop="description" content="向着高远支撑起生命和灵魂">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="闪烁微光的部落阁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/28/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%96%B9%E6%B3%95%E5%AD%A6%EF%BC%9A%E7%BB%93%E6%9E%84%E5%8C%96%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">软件开发方法学：结构化分析方法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-04-28 09:25:09 / 修改时间：09:25:49" itemprop="dateCreated datePublished" datetime="2020-04-28T09:25:09+08:00">2020-04-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="软件开发方法学：结构化分析方法"><a href="#软件开发方法学：结构化分析方法" class="headerlink" title="软件开发方法学：结构化分析方法"></a>软件开发方法学：结构化分析方法</h1><p><strong>软件开发方法</strong>：指的是软件开发过程所遵循的办法和步骤。软件开发的目的是有效的得到一个运行的系统及其支持文档，并满足有关的质量要求</p>
<p><strong>软件开发方法学</strong>：指的是规则、方法和工具的集成，既支持开发也支持以后的演化过程（交付运行后，系统还会变化；或是为了改错，或是为了功能的增减）。</p>
<p><strong>结构化方法</strong>：一种特定的软件开发方法学，一种系统化的软件开发方法，包括：</p>
<ul>
<li>结构化分析方法</li>
<li>结构化设计方法</li>
<li>结构化程序设计方法</li>
</ul>
<p><strong>结构化分析</strong>：就软件需求分析而言，即：系统化地使用问题域术语，给出该问题的模型，即“系统必须做什么”的一个估算。</p>
<h3 id="需求分析的目标"><a href="#需求分析的目标" class="headerlink" title="需求分析的目标"></a>需求分析的目标</h3><p>​    对需求陈述进行分析，解决其中的歧义、不一致性等问题，以系统化的形式表达用户的需求，即给出问题的形式化或半形式化的描述（称为系统的概念模型，或系统的需求规约，或需求规格说明）。作为开发人员和客户间契约的基础，并作为而后开发活动的一个基本输入。</p>
<h3 id="实现软件需求分析的目标对方法学的需求"><a href="#实现软件需求分析的目标对方法学的需求" class="headerlink" title="实现软件需求分析的目标对方法学的需求"></a>实现软件需求分析的目标对方法学的需求</h3><ul>
<li>提供一组术语（符号），指导需求抽象层中需要关注的主要方面，并用于表达分析中所使用的信息。这些术语形成一个特定的抽象层，即需求层</li>
<li>依据这些术语所形成的空间，给出表达模型的工具，支持表达系统功能形态</li>
<li>给出过程指导，以支持系统化地使用相关信息建造系统模型</li>
</ul>
<h3 id="基本术语"><a href="#基本术语" class="headerlink" title="基本术语"></a>基本术语</h3><p>​    一个抽象层是由一组确定的术语定义的，为支持需求分析中有关要使用的那些信息的表达，结构化分析方法给出了以下五个术语/符号</p>
<ul>
<li>数据流:$\longrightarrow$ :数据的流动</li>
<li>加工：$\bigcirc$ :对数据进行变换的单元</li>
<li>数据存储：$=$  ：数据的静态结构</li>
<li>数据源：$\square$ :数据流的起点,系统之外的实体</li>
<li>数据潭：$\square$:数据流的归宿地，系统之外的实体</li>
</ul>
<p>其中：</p>
<ul>
<li>数据流、数据存储用于支持数据抽象，加工支持过程、功能的抽象，用于表达系统内涵</li>
<li>数据源、数据潭支持系统边界抽象，用于表达系统外延</li>
</ul>
<p><strong>需求分析的首要任务是建立系统功能模型</strong></p>
<h3 id="模型表达工具"><a href="#模型表达工具" class="headerlink" title="模型表达工具"></a>模型表达工具</h3><h4 id="数据流图（DFD图）—表达系统功能模型的工具"><a href="#数据流图（DFD图）—表达系统功能模型的工具" class="headerlink" title="数据流图（DFD图）—表达系统功能模型的工具"></a>数据流图（DFD图）—表达系统功能模型的工具</h4><p>​    DFD图是一种描述数据变换的图形工具，它包含的元素可以是数据流、数据存储、加工、数据源和数据潭等</p>
<h4 id="数据字典—定义数据流和数据存储"><a href="#数据字典—定义数据流和数据存储" class="headerlink" title="数据字典—定义数据流和数据存储"></a>数据字典—定义数据流和数据存储</h4><p>​    用于定义数据流和数据存储的结构，并给出构成所给出的数据流和数据存储的各数据项的基本数据类型</p>
<p>引入：一些逻辑操作符，用于定义数据结构</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>含义描述</th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>等价于（定义为）</td>
</tr>
<tr>
<td>+</td>
<td>与（顺序结构）</td>
</tr>
<tr>
<td>｛｝</td>
<td>重复（循环结构）</td>
</tr>
<tr>
<td>[ | ]</td>
<td>或（选择结构）</td>
</tr>
<tr>
<td>（）</td>
<td>任选</td>
</tr>
<tr>
<td>m..n</td>
<td>界域</td>
</tr>
</tbody></table>
<h4 id="判定表或判定树等—定义加工小说明"><a href="#判定表或判定树等—定义加工小说明" class="headerlink" title="判定表或判定树等—定义加工小说明"></a>判定表或判定树等—定义加工小说明</h4><p>​    描述加工“做什么”，即加工逻辑，也包括其他一些与加工有关的信息，如执行条件、优先级、执行频率、出错处理等。加工小说明描述的是底层的、不可再分的叶子加工</p>
<p><strong>结构化自然语言</strong>：适用于加工的输入数据和输出数据之间的逻辑关系比较简单的加工描述，类似伪代码</p>
<p><strong>判定表</strong>：适用于加工的输入数据和输出数据之间的逻辑关系比较复杂的加工描述</p>
<table>
<thead>
<tr>
<th>条件类别</th>
<th>条件组合</th>
</tr>
</thead>
<tbody><tr>
<td>操作</td>
<td>操作执行</td>
</tr>
</tbody></table>
<p><strong>判定树</strong>：适用于加工的输入数据和输出数据之间的逻辑关系比较复杂的加工描述</p>
<h3 id="过程指导"><a href="#过程指导" class="headerlink" title="过程指导"></a>过程指导</h3><ol>
<li><p>使用数据流图DFD，建立系统的功能模型</p>
<p>首先，建立系统环境图（顶层数据流图），确定系统边界</p>
<p>继之，自顶向下，逐步求精，建立系统的层次数据流图</p>
<ul>
<li>将加工“打碎”，将父图的每一加工按其功能分解为若干子加工</li>
<li>“分派”数据流，将父图的输入流和输出流“分派”到子加工</li>
<li>引入文件，使之形成一个有机整体—系统，在各加工之间建立合理的关系</li>
</ul>
</li>
<li><p>使用结构符建立数据字典：定义数据流、数据存储、数据项</p>
</li>
<li><p>给出加工小说明，可以使用判定表、判定树等</p>
<p>描述一个加工，一般遵循如下模板：</p>
<ul>
<li>加工编号：给出加工编号</li>
<li>加工名：给出该加工的标识</li>
<li>输入流：给出该加工的所有输入数据流</li>
<li>输出流：给出该加工的所有输出数据流</li>
<li>加工逻辑：采用结构化自然语言、判定表、判定树等工具，给出该加工输入数据和输出数据之间的关系</li>
</ul>
</li>
</ol>
<h4 id="建模中应注意的问题"><a href="#建模中应注意的问题" class="headerlink" title="建模中应注意的问题"></a>建模中应注意的问题</h4><p>​    结构化分析方法是一种半形式化的规约方法，给出了一组特定的术语表和标准化的表达格式—数据流图，在表达上均必须遵循一些约定，即应以一种准确和一致方式使用之。</p>
<p>​    应注意模型平衡问题和信息组织的复杂性控制问题。</p>
<h5 id="模型平衡问题"><a href="#模型平衡问题" class="headerlink" title="模型平衡问题"></a>模型平衡问题</h5><ul>
<li>父图和子图的边界一致性问题，即它们应该有相同的边界</li>
<li>数据流图中的数据流与数据字典的一致问题，即每个数据流和数据存储必须在数据字典中予以定义</li>
<li>数据流图中的数据流与数据字典的一致性问题，即每个数据流和数据存储必须在数据字典中予以定义</li>
<li>数据流图中的“叶”加工（最底层）与小说明的一致性问题，即必须给出“叶”加工的说明</li>
<li>小说明和数据流图的图形表示一致性问题，即在小说明中，必须说明“输入数据流”如何使用，必须说明如何产生“输出数据流”，必须说明如何选取、使用、修改“数据存储”。 </li>
</ul>
<h5 id="信息组织复杂性控制问题"><a href="#信息组织复杂性控制问题" class="headerlink" title="信息组织复杂性控制问题"></a>信息组织复杂性控制问题</h5><ul>
<li>上层数据可以“打包”</li>
<li>上下层数据流对应关系在数据字典中给出，但包内数据流的性质（输入、输出）必须一致</li>
<li>一幅图中的图元个数应该控制在7+/-2以内</li>
<li>与每一加工相关的数据流的数目应该适中</li>
<li>分析数据内容，确定是否所有的输入信息都用于产生输出信息</li>
<li>分析加工，确定一个加工所产生的输出是否能够由该加工的输入信息导出</li>
</ul>
<h3 id="需求分析的输出"><a href="#需求分析的输出" class="headerlink" title="需求分析的输出"></a>需求分析的输出</h3><p>​    XXX系统需求规格说明书</p>
<ol>
<li><p>引言</p>
<p>1.1 编写目的</p>
<p>​    说明编写本需求规格说明书的目的</p>
<p>1.2 背景说明</p>
<p>​    (1) 给出待开发的软件产品的名称;</p>
<p>​    (2) 说明本项目的提出者、开发者及用户;</p>
<p>​    (3) 说明该软件将做什么，如有必要，说明不做什么</p>
<p>1.3 术语定义</p>
<p>1.4 参考文献</p>
</li>
<li><p>概述</p>
<p>2.1 功能概述</p>
<p>​    叙述待开发软件产品将完成的主要功能</p>
<p>2.2 约束</p>
<p>​    叙述对系统设计产生影响的限制条件，并对下一节所述的某些特殊需求提供理由，如管理模式，硬件限制、安全等。</p>
</li>
<li><p>数据流图与数据字典及加工说明</p>
<p>3.1 数据流图</p>
<p>​    3.1.1 数据流图1</p>
<p>​        （1）画出该数据流图</p>
<p>​        （2）加工说明</p>
<p>​        （3）数据流说明</p>
<p>​    3.1.2 数据流图2</p>
<p>​    3.3 数据字典</p>
<p>​    3.2.1 文件说明</p>
<p>​    3.2.2 数据项说明</p>
</li>
<li><p>接口</p>
<p>4.1 用户接口</p>
<p>4.2 硬件接口</p>
<p>4.3 软件接口</p>
</li>
<li><p>性能需求</p>
<p>5.1 精度</p>
<p>​    逐项说明对各项输入数据和输出数据所达到的精度</p>
<p>5.2 时间特征</p>
<p>​    定量说明本软件的时间特征，如响应时间，更新处理时间、数据传输、转换时间、计算时间等。</p>
<p>5.3 灵活性</p>
<p>​    说明本软件所具有的灵活性，即当用户需求有某些变化时（如操作方式、运行环境、时间特征等），本软件的适应能力</p>
</li>
<li><p>属性</p>
<p>6.1 可使用性</p>
<p>​    规定某些需求，如检验点、恢复方式和重启动性，以确保软件可使用</p>
<p>6.2 保密性</p>
<p>​    规定保护软件的要素</p>
<p>6.3 可维护性</p>
<p>6.4 可移植性</p>
</li>
<li><p>其他需求</p>
<p>7.1 数据库</p>
<p>7.2 操作</p>
<p>7.3 故障及处理</p>
</li>
</ol>
<h3 id="需求验证"><a href="#需求验证" class="headerlink" title="需求验证"></a>需求验证</h3><p>​    有关SRS内容方面：</p>
<p><strong>正确性</strong>：指的是SRS中陈述的每个需求都表达了将要构造的系统的某个要求</p>
<p><strong>无二义性</strong>：指的是SRS中陈述的每个需求都只有一种解释</p>
<p><strong>完整性</strong>：若一个SRS具有以下三个特性，则它是完整的：</p>
<ul>
<li>未来系统做的任何事情都包含在SRS的陈述中。</li>
<li>未来系统响应所有可能的输入（包括有效和无效）。</li>
<li>SRS中没有被标识为“待定”的内容。</li>
</ul>
<p><strong>可验证性</strong>：SRS中陈述的每个需求都是可验证的，即当且仅当存在一个有限代价的过程，可以检查构造的软件产品是否符合用户的需求</p>
<ul>
<li>任何二义性必然导致不可验证性</li>
<li>任何不可度量的量，如“通常”、“时常”等</li>
<li>任何等同于停机问题的需求是不能被验证的</li>
</ul>
<p><strong>一致性</strong>：</p>
<ul>
<li>SRS中陈述的需求没有与以前的文档发生冲突</li>
<li>SRS陈述的各个需求之间没有发生冲突</li>
</ul>
<p><strong>可理解性</strong>。</p>
<p>​    有关SRS格式与风格方面：</p>
<p><strong>可修改性</strong>：SRS的结构风格使任何对需求的必要修改都易于完整、一致的进行</p>
<p><strong>可被追踪性</strong>：SRS中的每个需求的出处都是清楚的，意味着SRS中包含对前期支持文档的引用表</p>
<p><strong>设计无关性</strong>：指的是SRS不暗示特定的软件结构和算法</p>
<p><strong>注释</strong>：向开发机构提供每个需求是否重要的指导意见，如E（Essential），D（Desirable），O（O ptional）</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/16/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="闪烁微光">
      <meta itemprop="description" content="向着高远支撑起生命和灵魂">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="闪烁微光的部落阁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/16/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">工厂模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-16 10:55:08" itemprop="dateCreated datePublished" datetime="2020-04-16T10:55:08+08:00">2020-04-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-28 09:23:59" itemprop="dateModified" datetime="2020-04-28T09:23:59+08:00">2020-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h1><p>​    工厂模式实现了创建者和调用者的分离，用工厂方法代替new操作,将选择实现类、创建对象统一管理和控制，从而将调用者与实现类解耦，分为：</p>
<ul>
<li><p>简单工厂模式：用来生产同一等级结构中的任意产品。（对于新增的产品，需要修改已有代码）</p>
</li>
<li><p>工厂方法模式：用来生产同一等级结构中的固定产品。（支持增加任意产品）</p>
</li>
<li><p>抽象工厂模式：用来生产不同产品族的全部产品。（不能增加新的产品，支持增加产品族）</p>
</li>
</ul>
<blockquote>
<p>  面向对象设计的基本原则：</p>
<ul>
<li>SRP（Single Responsibility Principle）单一职责原则：一个类只负责相应领域的职责，不要存在多于一个导致类变更的原因</li>
<li>OCP（Open-Closed Principle）开闭原则：一个软件的实体应当对拓展开放，对修改关闭</li>
<li>LSP（Liskov Substitution Principle）里氏替换原则：任何基类可以出现的地方，子类一定可以出现</li>
<li>DIP（Dependence Inversion Principle）依赖倒转原则：要针对接口编程，不要针对实现编程</li>
<li>ISP（Interface Segregation Principle）接口隔离原则：类不应该依赖它不需要的接口，一个类对另一个类的依赖应建立在最小的接口上</li>
<li>LoD（Law of Demeter）迪米特法则：只与你直接的朋友通信，而避免和陌生人通信</li>
</ul>
</blockquote>
<h3 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ICar</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Audi</span> <span class="keyword">implements</span> <span class="title">ICar</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"奥迪在行驶"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Byd</span> <span class="keyword">implements</span> <span class="title">ICar</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"比亚迪在行驶"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarFactory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Car <span class="title">createCar</span><span class="params">(String type)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(type.equals(<span class="string">"Audi"</span>))</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Audi();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(type.equals(<span class="string">"Byd"</span>))</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Byd();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h3><p>​    工厂方法模式和简单工厂模式的不同：简单工厂模式只有一个工厂类，而工厂方法模式有一组实现了相同接口的工厂类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//简单工厂模式实现</span></span><br><span class="line"><span class="comment">//Car接口和实现类同上</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> interface <span class="title">ICarFactory</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="function">ICar <span class="title">createCar</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> AudiFactory implements ICarFactory</span><br><span class="line">&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ICar <span class="title">createCar</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Audi();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> BydFactory implements ICarFactory</span><br><span class="line">&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ICar <span class="title">createCar</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Byd();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//后续拓展只需要实现接口增加新工厂即可</span></span><br></pre></td></tr></table></figure>

<h3 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h3><p>​    抽象工厂模式用于生产不同产品族的全部产品（不能增加新的产品）。在有多个业务品种，业务分类时，通过抽象工厂模式生产需要的对象时一种好的解决方式。例如，不仅需要创建Car接口的子类，还要创建其他接口的子类，这时简单工厂不能满足需求</p>
<h4 id="产品族的概念"><a href="#产品族的概念" class="headerlink" title="产品族的概念"></a>产品族的概念</h4><p>​    例如，汽车的发动机、座椅、轮胎为产品族。其中，高端发动机、高端座椅、高端轮胎为一个产品族（包括这三个产品），低端发动机、低端座椅、低端轮胎为另一产品族。如生产“汽车”这个产品族的产品，类似于汽车生产线生产整辆汽车（而不能单独生产某一部件）。这个生产线还可以生产不同的（零件接口实现不同）汽车。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//抽象工厂模式实现</span></span><br><span class="line"><span class="comment">//发动机接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IEngine</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//高端发动机</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LuxuryEngine</span> <span class="keyword">implements</span> <span class="title">IEngine</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"效率高！"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    Sysem.out.println(<span class="string">"启动快！"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//低端发动机</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LowEngine</span> <span class="keyword">implements</span> <span class="title">IEngine</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"效率低！"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    Sysem.out.println(<span class="string">"启动慢！"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//座椅接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ISeat</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">seat</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//高端座椅</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LuxurySeat</span> <span class="keyword">implements</span> <span class="title">ISeat</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">seat</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"体验好！"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//低端座椅</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LowSeat</span> <span class="keyword">implements</span> <span class="title">ISeat</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">seat</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"体验差！"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//轮胎接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ITyre</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">revolve</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//高端轮胎</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LuxuryTyre</span> <span class="keyword">implements</span> <span class="title">ISeat</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">revolve</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"磨损慢！"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//低端轮胎</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LowTyre</span> <span class="keyword">implements</span> <span class="title">ISeat</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">revolve</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"磨损快！"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//工厂接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ICarFactory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> IEngine <span class="title">creatEngine</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> ISeat <span class="title">createSeat</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> ITyre <span class="title">createTyre</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//高端汽车工厂</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LuxuryCarFactory</span> <span class="keyword">implements</span> <span class="title">ICarFactory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> IEngine <span class="title">createEngine</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LuxuryEngine();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ISeat <span class="title">createSeat</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LuxurySeat();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> ITyre <span class="title">createTyre</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> LuxuryTyre();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//低端汽车工厂</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LowCarFactory</span> <span class="keyword">implements</span> <span class="title">ICarFactory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> IEngine <span class="title">createEngine</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LowEngine();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ISeat <span class="title">createSeat</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LowSeat();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> ITyre <span class="title">createTyre</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> LowTyre();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    简而言之，抽象工厂模式的实现类似生产线组装产品。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/14/%E8%BD%AF%E4%BB%B6%E9%9C%80%E6%B1%82%E4%B8%8E%E8%BD%AF%E4%BB%B6%E9%9C%80%E6%B1%82%E8%A7%84%E7%BA%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="闪烁微光">
      <meta itemprop="description" content="向着高远支撑起生命和灵魂">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="闪烁微光的部落阁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/14/%E8%BD%AF%E4%BB%B6%E9%9C%80%E6%B1%82%E4%B8%8E%E8%BD%AF%E4%BB%B6%E9%9C%80%E6%B1%82%E8%A7%84%E7%BA%A6/" class="post-title-link" itemprop="url">软件需求与软件需求规约</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-14 15:20:23" itemprop="dateCreated datePublished" datetime="2020-04-14T15:20:23+08:00">2020-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-22 00:00:00" itemprop="dateModified" datetime="2020-04-22T00:00:00+08:00">2020-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="软件需求与软件需求规约"><a href="#软件需求与软件需求规约" class="headerlink" title="软件需求与软件需求规约"></a>软件需求与软件需求规约</h1><ul>
<li>需求分析（问题定义）：通过分析分配给软件的那些系统需求，确定软件需求及约束</li>
<li>软件体系结构设计（解决方案分析）：为软件需求及约束，确定一组解决方案，进行实例研究，分析可能的方案，并选择一个最佳的方案。</li>
<li>验证、确认及测试（产品评估）：以需求为准则，通过测试、演示、分析及审查等方式，评估最终产品和文档，其中包括一些必要的软件系统集成活动   </li>
</ul>
<h3 id="需求与需求获取"><a href="#需求与需求获取" class="headerlink" title="需求与需求获取"></a>需求与需求获取</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><blockquote>
<p>一个需求是一个有关“要予构造”的陈述，描述了待开发产品/系统（或项）功能上的能力、性能参数或者其他性质</p>
</blockquote>
<ul>
<li>什么样的陈述可以作为需求——需求的基本性质<ul>
<li>必要的：是要求的吗？</li>
<li>无歧义的：只能用一种方式解释吗？</li>
<li>可测的：可以对它进行测试吗？</li>
<li>可跟踪的：可以从一个开发阶段到另一个开发阶段对它进行跟踪吗？</li>
<li>可测量的：可以对它进行测量吗？</li>
</ul>
</li>
</ul>
<h4 id="需求的分类"><a href="#需求的分类" class="headerlink" title="需求的分类"></a>需求的分类</h4><p>​    功能、性能、外部接口、设计约束、质量属性</p>
<h5 id="功能需求"><a href="#功能需求" class="headerlink" title="功能需求"></a>功能需求</h5><blockquote>
<p>功能需求规约了系统或系统构件必须执行的功能</p>
</blockquote>
<p>除了对要执行的功能给出一个陈述外，还应规约如下内容：</p>
<ul>
<li>关于该功能输入的所有假定，或为了验证该功能输入，有关检测的假定</li>
<li>功能内的任一次序，这一次序是与外部有关的</li>
<li>对异常实现的响应，包括所有内外部所产生的错误</li>
<li>需求的时序或优先程度</li>
<li>功能之间的互斥规则</li>
<li>系统内部状态的假定</li>
<li>为了该功能的执行，所需要的输入和输出次序</li>
<li>用于转换或内部计算所需要的公式</li>
</ul>
<p>注：</p>
<ul>
<li>功能需求是整个需求的主题，即没有功能需求。就没有非功能需求</li>
<li>非功能需求对功能需求而言，可以是一对多的</li>
</ul>
<h5 id="性能需求"><a href="#性能需求" class="headerlink" title="性能需求"></a>性能需求</h5><blockquote>
<p>性能需求规约了一个系统或系统构件必须具有的性能特性</p>
</blockquote>
<h5 id="外部接口需求"><a href="#外部接口需求" class="headerlink" title="外部接口需求"></a>外部接口需求</h5><blockquote>
<p>外部接口需求规约了系统或系统构件必须与之交互的硬件、软件或数据库元素。它也可能规约其格式、时间或其他因素</p>
</blockquote>
<p>外部接口分为以下几类：</p>
<ul>
<li>系统接口：描述一个应用如何与系统的其他应用进行交互</li>
<li>用户接口：规约了软件产品和用户之间接口的逻辑特性，即规约对给用户所显示的数据，对用户所要求的数据以及用户如何控制该用户接口</li>
<li>硬件接口：如果软件系统必须与硬件设备进行交互，那么就应说明所要求的支持和协议类型</li>
<li>软件接口：允许与其他软件产品进行交互，如，数据管理系统。操作系统或数学软件包</li>
<li>通讯接口：规约待开发系统与通讯设施（如局域网）之间的交互。如果通讯需求包含了系统必须使用的网络类型，那么有关类型的信息就应该包含在SRS中</li>
</ul>
<h5 id="设计约束"><a href="#设计约束" class="headerlink" title="设计约束"></a>设计约束</h5><blockquote>
<p>设计约束限制了系统或系统构件的设计方案。</p>
</blockquote>
<ul>
<li>针对产品开发，为确定其相关的设计约束，一般需要考虑以下10个方面<ul>
<li>法规政策</li>
<li>硬件限制</li>
<li>与其他应用的接口</li>
<li>并发操作</li>
<li>审计功能：规约软件系统必须班组的数据记录准则或事务记录准则。</li>
<li>控制功能</li>
<li>高级语言需求</li>
<li>握手协议</li>
<li>应用的关键程度</li>
<li>安全考虑</li>
</ul>
</li>
</ul>
<h5 id="质量属性"><a href="#质量属性" class="headerlink" title="质量属性"></a>质量属性</h5><p>​    质量属性规约了软件产品必须具有的一个性质是否达到质量方面一个所期望的水平</p>
<ul>
<li>可靠性：软件系统在指定环境中没有失败而正常运行的概率</li>
<li>存活性：当系统的某一部分系统不能运行时，该软件继续运行或支持关键功能的可能性</li>
<li>可维护性：发现和改正一个软件故障或对特定范围进行修改所要求的平均工作</li>
<li>用户友好性：学习和使用一个软件系统的容易程度</li>
<li>安全性：在一个预定的时间内，使软件系统安全的可能性</li>
<li>可移植性：软件系统运行的平台类型</li>
</ul>
<h3 id="需求发现"><a href="#需求发现" class="headerlink" title="需求发现"></a>需求发现</h3><p>常用的发现初始需求的技术，包括：</p>
<h4 id="自悟"><a href="#自悟" class="headerlink" title="自悟"></a>自悟</h4><blockquote>
<p>需求人员把自己作为系统的最终用户，审视该系统并提出问题：“如果我使用这一系统，则我需要……”</p>
</blockquote>
<ul>
<li>适用条件：需求工程师不能直接与用户进行交流</li>
<li>成功条件：要使自悟是成功的，需求人员必须具有比最终用户还要多的应用领域和过程方面的知识，并具有良好的想象能力 </li>
</ul>
<h4 id="交谈"><a href="#交谈" class="headerlink" title="交谈"></a>交谈</h4><blockquote>
<p>为了确定系统应该提供的功能，需求人员通过提出问题，用户回答，直接询问用户想要的是一个什么样的系统</p>
</blockquote>
<ul>
<li>成功的条件<ul>
<li>需求人员是否具有正确提出问题的能力</li>
<li>回答问题是否具有揭示需求本意的能力</li>
</ul>
</li>
<li>存在的风险：在交谈期间需求可能不断增长，或是以前没有认识到的合理需求的一种表现，可能导致超出项目成本和进度的限制</li>
<li>应对措施：项目管理人员和客户管理人员应该定期对交谈过程的结果进行复审，其中具有挑战的问题是判断：<ul>
<li>什么时候对这一增长划界</li>
<li>什么时候将这一增长告知客户</li>
</ul>
</li>
</ul>
<h4 id="观察"><a href="#观察" class="headerlink" title="观察"></a>观察</h4><blockquote>
<p>通过观察用户执行其现行的任务和过程，或通过观察他们如何操作与所期望的新系统有关的现有系统，了解系统裕兴的环境，特别是了解要建的新系统与现存系统、过程以及工作方法之间必须进行的交互。</p>
</blockquote>
<ul>
<li>存在的风险<ul>
<li>客户可能抵触这一观察</li>
<li>客户还可能认为开发者在签约之前，就已经熟悉了他们的业务</li>
</ul>
</li>
</ul>
<h4 id="小组会"><a href="#小组会" class="headerlink" title="小组会"></a>小组会</h4><blockquote>
<p> 举行客户和开发人员的联席会议，与客户组织的一些代表共同开发需求，其中：</p>
</blockquote>
<ul>
<li><p>通常由开发组织的一个代表为首席需求工程师或软件工程项目经理，主持这一会议，但还可以采用其他形式，这依赖于其应用领域和主持人的能力。主持人的作用主要是掌握会议的进程。</p>
</li>
<li><p>必须仔细的选择该小组的成员，不仅要考虑他们对现存的和未来运行环境的理解程度，还要考虑他们的人品</p>
</li>
<li><p>优点</p>
<ul>
<li>如果会议组织得当，可以很快地标识出一些需求。</li>
<li>可使需求开发人员在一次会议中能够对一个给定的需求得到多种观点，从而不但可节省与个人交谈的时间，还可节省联系他们的时间</li>
<li>有关需求不同观点之间的冲突，可以揭示需求中存在的问题，也有助于客户在其内部达成一致</li>
</ul>
</li>
</ul>
<h4 id="提炼"><a href="#提炼" class="headerlink" title="提炼"></a>提炼</h4><blockquote>
<p>复审技术文档（例如，有关需要的陈述，功能和性能目标的陈述，系统规约和接口标准，硬件设计文档以及ConOps文档）并提出相关的信息</p>
</blockquote>
<ul>
<li>适用条件：提炼方法是针对已经有了部分需求文档的情况</li>
<li>在许多项目中，在任何交谈、观察、小组会或自悟之前，应该对该项目的背景文档进行复审，还应对系统规约进行复审，同时了解相关的标准和政策。</li>
</ul>
<h4 id="注"><a href="#注" class="headerlink" title="注"></a>注</h4><blockquote>
<ul>
<li>在任意特定的环境中，每项技术都有其自己的有点喝不足，在实施上述任何一项技术时，都可以辅以其他方法，例如原型构造、在句型小组会时可以使用原型，方便人员之间的交流</li>
<li>根据需求工程人员的技能和产品、合同的实际情况，往往需要组合地使用这些技术来开发初始需求</li>
<li>执行需求发现这项活动的人，其技能水平将对这项活动的成功有重大的影响</li>
<li>大型复杂项目和一些有能力的组织，在开发需求文档时，往往使用系统化的需求获取、分析技术和工具。一些方法提供了系统化、自动化的功能，并可逐一验证单一需求所具有的五个性质，验证需求规约是否具有四个性质。</li>
</ul>
</blockquote>
<h3 id="需求规约（SRS）及其格式"><a href="#需求规约（SRS）及其格式" class="headerlink" title="需求规约（SRS）及其格式"></a>需求规约（SRS）及其格式</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><blockquote>
<p>需求规约时一个软件项/产品/系统所有需求陈述的正式文档，是一个软件产品/系统的概念模型</p>
</blockquote>
<h4 id="基本性质"><a href="#基本性质" class="headerlink" title="基本性质"></a>基本性质</h4><ul>
<li>重要性和稳定性程度</li>
<li>可修改的：在不过多的影响其他需求的前提下，可以容易的修改一个单一需求</li>
<li>完整的：没有被遗漏的需求</li>
<li>一致的：不存在互斥的需求  </li>
</ul>
<p>就功能的需求规约来说，还应考虑以下问题：</p>
<ul>
<li>功能源</li>
<li>功能共享的数据</li>
<li>功能与外部界面的交互</li>
<li>功能所使用的计算资源</li>
</ul>
<h4 id="需求规约格式"><a href="#需求规约格式" class="headerlink" title="需求规约格式"></a>需求规约格式</h4><blockquote>
<ol>
<li><p>引言</p>
<p> 1.1 目的</p>
<p> 1.2 范围</p>
<p> 1.3 定义，缩略语</p>
<p> 1.4 参考文献</p>
<p> 1.5 概述（即项目范围）</p>
</li>
<li><p>总体描述</p>
<p> 2.1 产品概述</p>
<p> 2.2 产品功能</p>
<p> 2.3 用户特性</p>
<p> 2.4 约束</p>
<p> 2.5 假设和依赖</p>
</li>
<li><p>特定需求</p>
</li>
</ol>
<p>附录</p>
<p>索引</p>
</blockquote>
<p>​    第三部分“特定需求”，是文档的技术核心，一般来说，应根据不同类型的系统来构造这一部分，其中可能会涉及一些模板：</p>
<ul>
<li>模板1:根据系统运行模式，把第三部分划分为一些小姐，并在一个小节中给出系统性能的规约</li>
<li>模板2:通过一种可选的模式划分，把第三部分划分为一些小节，其中没肿么的性能包含在该模式的规约中。</li>
<li>模版3:根据用户类，把第三部分划分为一些小节，其中每类用户执行的功能包含在该类用户的描述中。 </li>
<li>模板4:按对象，把第三部分划分为一些小节，在每一小节中给出该对象所关联的功能</li>
</ul>
<h4 id="表达需求规约（规格说明书）的三种风格"><a href="#表达需求规约（规格说明书）的三种风格" class="headerlink" title="表达需求规约（规格说明书）的三种风格"></a>表达需求规约（规格说明书）的三种风格</h4><p>​    在获取SRS（草案）期，一般应使用非形式化语言来表达需求规约</p>
<blockquote>
<p> 非形式化的规约：即以一种自然语言来表达需求规约，如同使用一种自然语言写了一篇文章</p>
<p> 其中：可以不局限于那种语言通常所规定的任何符号或特殊限制（例如文法和词法），但要为那些在一个特定语境中所使用的术语提供词义定义，一般情况下，该语境与通常使用该术语的语境时有区别的。</p>
</blockquote>
<p>​    在对需求进行技术分析期间，一般应采用半形式化语言来表达需求规约</p>
<blockquote>
<p>半形式化的规约：即以半形式化符号体系（包括术语表、标准化的表达格式等）来表达需求规约。因此，半形式化规约的编制应遵循一个标准的表示模板（一些约定）。</p>
<p>其中：</p>
<ul>
<li>术语表明确地标识了一些词，可以基于某一种自然语言</li>
<li>标准化的表达格式标识了一些元信息，支持以更清晰的方式系统化来编制文档。</li>
</ul>
<p>注：应用中，不论是词还是标准化的表达格式，在表达上均必须遵循一些约定</p>
</blockquote>
<p>​    对于质量（特别是安全性）要求比较高的软件产品/系统，一般应采用形式化语言来表达需求规约</p>
<blockquote>
<p>形式化规约：即以一种基于良构数学概念的符号体系来编制需求规约，一般往往伴有解释性注释的支持。其中：</p>
<ul>
<li>以数学概念用于定义该符号体系的词法和语意</li>
<li>定义了一组支持逻辑推理的证明规则，并支持这一符号体系的定义和引用</li>
</ul>
</blockquote>
<ul>
<li>软件系统的技术是复杂的，因此没有必要把系统的规约或实现束缚于某一技术上，即可以同时使用多种技术，分析用户需求，并建立相应的文档</li>
<li>确定什么样的需求规约表达方式，是组织或项目经理的责任</li>
</ul>
<h4 id="需求规约的作用"><a href="#需求规约的作用" class="headerlink" title="需求规约的作用"></a>需求规约的作用</h4><ul>
<li>作为软件开发组织和用户之间一份事实上的技术合同书，是产品功能及其环境的体现</li>
<li>对于项目的其余大多数工作，它是一个管理控制点</li>
<li>是创建产品验收测试计划和用户指南的基础，即基于需求规约一般还会产生另外两个文档——初始测试计划和用户系统操作描述</li>
</ul>
<h5 id="测试的分类"><a href="#测试的分类" class="headerlink" title="测试的分类"></a>测试的分类</h5><p>单元测试：详细设计阶段生成</p>
<p>集成测试：总体设计阶段生成</p>
<p>有效性测试：需求分析阶段生成</p>
<h5 id="初始测试计划"><a href="#初始测试计划" class="headerlink" title="初始测试计划"></a>初始测试计划</h5><p>主要内容：对未来系统中的哪些功能和性能指标，以及达到何种要求，进行测试</p>
<p>作用：指导系统开发早期发现并修改一个错误，减少测试代价</p>
<h5 id="用户系统操作描述"><a href="#用户系统操作描述" class="headerlink" title="用户系统操作描述"></a>用户系统操作描述</h5><p>主要内容：从用户使用系统的角度，简要描述系统功能和性能，使用系统的主要步骤和方法，以及系统用户的责任等。相当于一份初步的用户手册</p>
<p>作用：</p>
<ul>
<li>在软件开发的早期，准备一份初步的用户手册可以使未来的系统用户能够从使用的角度检查、审核目标系统，从而比较容易判断这个系统是否符合他们的需要</li>
<li>为了书写这样的文档，也会迫使系统分析员从用户的角度来考虑软件系统，这样不论是审查还是复审时，就更容易发现不一致和误解的地方，这对保证软件质量和项目成功是很重要的</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/14/%E8%BD%AF%E4%BB%B6%E8%BF%87%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="闪烁微光">
      <meta itemprop="description" content="向着高远支撑起生命和灵魂">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="闪烁微光的部落阁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/14/%E8%BD%AF%E4%BB%B6%E8%BF%87%E7%A8%8B/" class="post-title-link" itemprop="url">软件过程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-14 15:16:16" itemprop="dateCreated datePublished" datetime="2020-04-14T15:16:16+08:00">2020-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-28 09:24:27" itemprop="dateModified" datetime="2020-04-28T09:24:27+08:00">2020-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="软件工程-软件过程"><a href="#软件工程-软件过程" class="headerlink" title="软件工程 软件过程"></a>软件工程 软件过程</h1><h3 id="软件生存周期过程：开发所涉及的活动"><a href="#软件生存周期过程：开发所涉及的活动" class="headerlink" title="软件生存周期过程：开发所涉及的活动"></a>软件生存周期过程：开发所涉及的活动</h3><ul>
<li>软件生存周期：软件产品或系统的一系列活动的全周期。从形成概念开始，历经开发、交付使用、在使用中不断修订和演化，直到最后被淘汰。</li>
<li>软件生存周期过程（软件过程）：软件生存周期中的一系列相关过程</li>
<li>过程是活动的集合，活动是任务的集合，任务是把输入转换成输出的操作。</li>
</ul>
<hr/>

<h4 id="过程的分类"><a href="#过程的分类" class="headerlink" title="过程的分类"></a>过程的分类</h4><p>按承担软件开发工作的主体，将软件生存周期过程分为三类：</p>
<ul>
<li><p>基本过程：是指那些与软件生产直接相关的活动集，又按过程中活动的不同主体，将基本过程分为5个过程：获取过程、供应过程、开发过程、运行过程、维护过程。</p>
<ul>
<li><p>获取过程：获取过程是获取者（需方）所从事的活动和任务，其目的是获得满足客户所表达的那些要求的产品和/或服务。该过程以定义客户要求开始，以接受客户所要求的产品和/或服务结束</p>
</li>
<li><p>供应过程 ：供应过程是供方为了向客户提供满足需求的软件产品或服务所从事的一系列活动和任务，其目的是向客户提供一个满足已达成需求的产品或服务。该过程包括的基本活动为：启动、准备投标、签订合同、规划、执行和控制、复审和评估、交付和完成</p>
<ul>
<li>其中“规划”活动包括：</li>
</ul>
<blockquote>
<ol>
<li>供方赢复审获取需求，以便定义管理该项目、保证可交付的软件产品或服务质量的框架</li>
<li>拂过合同中没有规定采用的软件生存周期模型，那么供方就应确定或选择一个适合于该项目的范围、规模和复杂度的软件生存周期模型。</li>
<li>供方应为关于项目的计划建立适当的需求，以便管理该项目和保证可交付软件产品或服务的质量。这样的需求应包括资源的需要以及需方的参与。</li>
<li>一旦建立了有关规划的需求，供方就应该考虑：</li>
</ol>
<ul>
<li>是否利用内部资源来开发该软件产品或提供软件服务</li>
<li>是否通过分包合同来开发该软件产品或提供软件服务</li>
<li>是否工内部或外部来获得现货软件产品</li>
<li>是否采用以上三点的组合</li>
</ul>
<p>并针对以上每一种选择给出风险分析。</p>
<ol start="5">
<li>供方应给予有关规划的需求和以上的选择，制定项目管理计划并形成文档。</li>
</ol>
</blockquote>
</li>
<li><p>开发过程：开发过程是软件开发者所从事的一系列活动和任务，其目的是将一组需求转换为一个软件产品或系统，包括13个过程</p>
<blockquote>
<ul>
<li>过程的实施准备：规划软件工程过程 </li>
<li>定义或选择软件生存周期模型，并将开发过程的活动和任务映射到该软件生存周期模型</li>
<li>依据文档过程，建立该过程文档；并将该文档置于配置管理过程之下，并作为实施变更控制的依据</li>
<li>依据问题解决过程，发现软件工作产品和任务中的问题和不一致性，并简历相应的文档</li>
<li>按照合同约定，实施相应的支持过程</li>
<li>为执行开发过程和支持过程的活动，对开发组织所建立的标准、方法、工具和计算机程序设计语言进行选择、剪裁和应用</li>
<li>依据开发和验收的所有需求，为执行过程的活动制定相应计划，例如风险管理计划、质量保证计划等，这些同样也包括标准、方法、工具、措施以及责任等，必要时这些计划可以分别建立</li>
<li>系统需求分析</li>
<li>系统结构设计</li>
<li>软件需求分析，主要任务包括：</li>
<li>建立软件需求规格说明书，其中包括：<ul>
<li>功能和能力规约，包括性能以及为执行软件的物理特征及环境条件</li>
<li>质量特征规约</li>
<li>软件接口规约</li>
<li>安全规约</li>
<li>数据定义和数据库需求</li>
<li>用户操作和执行需求</li>
<li>用户维护需求等</li>
</ul>
</li>
<li>软件体系结构设计</li>
<li>将对软件项的需求转变为一种体系结构<ul>
<li>该体系结构描述了该软件项的顶层结构并标识各个软件部件。其中应确保对软件项的所有需求都被分配给了相应的软件部件，并为了进行详细设计而使该项的需求得到进一步细化。软件项的体系结构应该形成文档。</li>
</ul>
</li>
<li>开发关于软件项的外部接口以及软件项的各个软件部件间的接口的顶层设计，并形成文档</li>
<li>编制数据库的顶层设计，并形成文档</li>
<li>编制用户文档的最初版本，并形成文档 </li>
<li>确定软件集成的初步测试需求和进度安排，并形成文档。</li>
<li>根据下列评价准则，评价软件项的体系结构、接口和数据库设计，评价 结果应形成文档：<ul>
<li>软件项需求的可追踪性</li>
<li>与软件项需求的外部一致性</li>
<li>软件部件之间的内部一致性</li>
<li>所应用的设计方法和标准的适宜性</li>
<li>详细设计的可行性</li>
<li>运行与维护的可行性</li>
</ul>
</li>
<li>按照联合评审，对软件体系结构进行评审</li>
<li>软件详细设计</li>
<li>软件编码和测试</li>
<li>软件集成</li>
<li>软件合格测试</li>
<li>系统集成</li>
<li>系统合格测试</li>
<li>软件安装</li>
<li>软件验收支持</li>
</ul>
</blockquote>
</li>
<li><p>运行过程：运行过程是系统操作者所从事的一系列活动和任务，其目标是在软件产品语气的环境中运行该产品，并为该软件产品的维护提供支持。</p>
</li>
<li><p>维护过程：维护过程是维护者所从事的一系列活动和任务。其目的是：对交付后的系统或软件产品，或为了纠正其错误，改进其性能或其他属性，而对其进行修改；或因环境变更而对其进行调整</p>
</li>
</ul>
</li>
<li><p>支持过程：是有关各方按其目标所从事的一系列支持活动集。又按过程中活动的不同主体，将支持过程分为8个过程</p>
</li>
</ul>
<blockquote>
<ul>
<li>文档过程：为记录生存周期所产生的信息而定义的活动</li>
<li>配置管理过程：应用管理上的和技术上的规程来支持整个软件生存周期的过程</li>
<li>质量保证过程：为客观 的保证软件产品和过程符合规定的需求以及已建立的计划而定义的活动</li>
<li>验证过程：根据软件项目需求，按不同深度验证软件产品而定义的活动。</li>
<li>确认过程：确定需求和最终的、已建立的系统或软件产品是否满足特定预期用途的过程</li>
<li>联合评审过程：为评价一项活动和产品而定义的活动</li>
<li>审计过程：确定遵照要求、计划合同的程度</li>
<li>问题解决过程：为分析和解决问题而定义的活动</li>
</ul>
</blockquote>
<ul>
<li>组织过程：指那些与软件生产组织有关的活动集。分为7个过程</li>
</ul>
<blockquote>
<ul>
<li>管理过程：是管理人员从事的，对其他过程进行管理的活动和任务</li>
<li>基础设施过程：为其他过程建立和维护所需基础设施的过程</li>
<li>改进过程：是管理人员从事的一组活动和任务，其目的是：建立、评价、测量、控制和改进软件生存周期过程</li>
<li>人力资源过程：是为组织和项目提供具有技能和知识人员的过程</li>
<li>资产管理过程：为组织的资产管理者而定义的活动</li>
<li>复用程序管理过程：为组织的软件复用而定义的活动</li>
<li>领域软件工程过程：为领域模型、领域软件体系结构的确定及该领域资产的开发和维护而定义的活动 </li>
</ul>
</blockquote>
<h3 id="软件生存周期模型：开发活动的组织框架"><a href="#软件生存周期模型：开发活动的组织框架" class="headerlink" title="软件生存周期模型：开发活动的组织框架"></a>软件生存周期模型：开发活动的组织框架</h3><p>​    称软件生存周期模型为“软件开发模型”，并把它定义为：软件过程、活动、任务的结构框架。</p>
<h5 id="瀑布模型"><a href="#瀑布模型" class="headerlink" title="瀑布模型"></a>瀑布模型</h5><p>系统需求$\longleftrightarrow$软件需求$\longleftrightarrow $需求分析$\longleftrightarrow $设计$\longleftrightarrow $编码$\longleftrightarrow $测试$\longleftrightarrow $运行</p>
<blockquote>
<ol>
<li>项目开发依次经过：需求、设计、编码和单元测试、集成及维护这一基本路径</li>
<li>通过每一阶段，提交以下产品：软件需求规约、设计文档、实际代码、测试用例、最终产品等。工作产品流经“正向”开发的基本不步骤路径。</li>
<li>“反向”步骤流表示对前一个可提交产品的重复变更（又称为“返工”）</li>
</ol>
<ul>
<li>由于所有开发活动的非确定性，因此是否需要重复变更，仅在下一个阶段或变更后的阶段才能认识到。</li>
<li>返工不仅在以前阶段的某一地方需要，而且对当前正在进行的工作也是需要的。</li>
</ul>
</blockquote>
<ul>
<li>开发的瀑布模型将软件生存周期的各项活动规定为依固定顺序而连接的若干阶段工作</li>
<li>瀑布模型规定了每一阶段的输入，以及本阶段的工作成果，作为输出传入下一阶段。</li>
<li>瀑布模型的优点<ul>
<li>在决定系统怎样做之前，存在一个需求阶段，鼓励对系统“做什么”进行规约（即设计之前的规约）</li>
<li>在建造构件之前，存在一个设计阶段，鼓励规划系统结构（即编码之前的设计）</li>
<li>在每一阶段结束时进行复审，允许获取方和用户的参与</li>
<li>前一步工作产品可作为下一步被认可的、文档化的基线。允许基线和配置早期接受控制。 </li>
</ul>
</li>
<li>瀑布模型的不足<ul>
<li>客户必须能够完整、正确和清晰的表达他们的需求，开发人员一开始就必须理解需求</li>
<li>缺乏灵活性。一旦软件需求存在偏差，就会导致开发出的软件产品不能满足用户的实际要求</li>
<li>在一个项目的早期阶段，过分的强调了基线和里程碑处的文档，可能要花费更多的时间，用于建立一些用处不大的文档</li>
<li>直到项目结束之前，都不能演示系统的能力，增加了项目的风险</li>
</ul>
</li>
<li>瀑布模型适用的情况<ul>
<li>需求已被很好的定义和理解</li>
<li>过程设计人员也很清楚：开发组织非常熟悉为实现这一模型所需要的过程</li>
<li>为了避免产生过多的反复迭代工作，增加开发成本，一般在准备采用瀑布模型（也包括其他模型）时，需要考虑以下两个问题：<ul>
<li>过程设计人员必须对初始产品（通常是软件需求规约、SRS）的不确定性进行评估</li>
<li>组织是否具有熟练实施每个活动和任务的历史经验</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="增量模型"><a href="#增量模型" class="headerlink" title="增量模型"></a>增量模型</h5><p>​    该模型有一个假设，即需求可以分段，称为一系列增量产品，每一增量可以分别地开发 </p>
<ul>
<li>增量模型的优点<ul>
<li>作为瀑布模型的第一个变体，具有瀑布模型的所有优点</li>
<li>第一个可交付版本所需要的成本和时间是很少的</li>
<li>开发由增量表示的小系统所承担的风险是不大的</li>
<li>由于很快发布了第一个版本，因此可以减少用户需求的变更</li>
<li>允许增量投资，即在项目开始时，可以仅对一个或两个增量投资 </li>
</ul>
</li>
<li>增量模型的缺点：如果增量模型不适于某些项目，或使用有误，则有以下缺点<ul>
<li>如果没有对用户的变更要求进行规划，那么产生的初始增量可能会造成后来增量的不稳定</li>
<li>如果需求不像早期思考的那样稳定和完整，那么一些增量可能需要重新开发，重新发布</li>
<li>管理发生的成本、进度和配置的复杂性，可能会超出一些组织的能力</li>
</ul>
</li>
<li>增量模型适用情况<ul>
<li>在开始开发时，需求很明确，且产品还可以适当的分解为一些 独立的，可交付的软件</li>
<li>在开发中，期望尽快提交其中的一些增量产品</li>
</ul>
</li>
</ul>
<h5 id="演化模型"><a href="#演化模型" class="headerlink" title="演化模型"></a>演化模型</h5><p>​    是一种有弹性的过程模式，由一些小的开发步骤组成，每一步历经需求分析、设计、实现和验证，产生软件产品的一个增量，通过这些迭代，完成最终软件产品的开发</p>
<blockquote>
<ul>
<li>针对事先不能完整定义需求的软件开发</li>
<li>针对用户的核心需求，开发核心系统</li>
<li>根据用户的反馈，实施活动的迭代</li>
</ul>
</blockquote>
<ul>
<li>与瀑布模型的关系</li>
</ul>
<blockquote>
<p>在演化模型中，仍然可以使用瀑布模型来管理每一个演化的增量，一旦理解了需求，就可以像实现瀑布模型那样开始设计阶段和编码阶段  </p>
</blockquote>
<ul>
<li>演化模型的优点与增量模型类似，但还具有以下优点：<ul>
<li>在需求不能予以规约时，可以使用这一演化模型</li>
<li>用户可以通过运行系统的实践，对需求进行改进</li>
<li>与瀑布模型相比，需要更多用户/获取方的参与</li>
</ul>
</li>
<li>演化模型的不足<ul>
<li>演化模型的使用需要有力的管理</li>
<li>演化模型的使用容易成为不编写需求或设计文档的接口，即使很好的理解了需求或设计</li>
<li>用户/获取方不易理解演化模型的自然属性，可能产生抱怨 </li>
</ul>
</li>
</ul>
<h4 id="喷泉模型"><a href="#喷泉模型" class="headerlink" title="喷泉模型"></a>喷泉模型</h4><p>​    特征：迭代、无缝</p>
<h4 id="螺旋模型"><a href="#螺旋模型" class="headerlink" title="螺旋模型"></a>螺旋模型</h4><p>​    该模型将软件生存周期的活动分为四个可重复的阶段：规划、风险分析、开发和评估。项目的进度是“螺旋”式的</p>
<p>其中：</p>
<blockquote>
<ul>
<li>评估和风险分析阶段都可以做出一个决策：项目是否继续</li>
<li>螺旋循环的次数指示了已消耗的资源</li>
<li>在规划阶段，风险分析阶段和开发阶段均进行需求规约活动</li>
<li>在早期螺旋循环中，为了最终的实现给出一些指导性决策，经常使用原型构造</li>
<li>设计和实现活动一般是在开发阶段进行</li>
<li>V&amp;V(Verify &amp; Validate 验证和确认)活动在开发阶段和评估阶段进行</li>
</ul>
</blockquote>
<ul>
<li><p>该模型关注解决问题的基本步骤：</p>
<ul>
<li><p>标识问题</p>
</li>
<li><p>标识一些可选方案，选择一个最佳方案</p>
</li>
<li><p>遵循动作步骤，并实施后续工作</p>
<p>其中只要完成了开发的一个迭代，开发的另一个迭代就开始</p>
</li>
</ul>
</li>
<li><p>螺旋模型的一个特征是，实际上只有一个迭代过程真正开发可交付的软件。因此，如果：</p>
<ul>
<li>项目开发的风险很大</li>
<li>客户不能确定系统需求，更广泛意义上来讲，还包括系统或系统类型的要求，这时螺旋模型就是一个好的生存周期模型。</li>
</ul>
</li>
<li><p>与其他模型的关系</p>
<ul>
<li><p>与演化模型一样，螺旋模型也使用瀑布模型作为一个嵌入的过程，即分析、设计、编码、实现和维护的瀑布过程，是螺旋一周的组成部分。</p>
</li>
<li><p>与演化模型最大不同是，加入了风险分析</p>
</li>
<li><p>尽管螺旋模型和一些迭代模型在框架和全局体系结构方面是等同的，但所关注的阶段以及它们的活动是不同的。</p>
<ul>
<li>标识客户想要的是一个什么样的系统</li>
<li>确定风险和效益的可选路线</li>
<li>选择最优方案</li>
<li>开发系统</li>
<li>评估完成情况等</li>
<li>重新开始</li>
</ul>
<blockquote>
<p>螺旋模型拓展了增量模型的管理任务范围。而增量模型是基于以下假定：需求是最基本的，并且是唯一的风险源。而在螺旋模型中，决策和降低风险的空间是相当广泛的</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h4 id="快速原型模型"><a href="#快速原型模型" class="headerlink" title="快速原型模型"></a>快速原型模型</h4><blockquote>
<p>快速原型是玄素建立起来的可以在计算机上运行的程序，它所能完成的功能往往是最终产品能完成功能的一个子集，原型在开发中的作用：</p>
<ul>
<li>获得用户的真正需求</li>
<li>可用于为一个项目或项目中的某些部分确定技术。成本和进度的可能性</li>
</ul>
</blockquote>
<p>快速原型模型中各主要部分：</p>
<ul>
<li>原型快速分析：指在分析者和用户的紧密配合下，快速确定软件系统的基本需求</li>
<li>原型构造：在原型分析的基础上，根据基本需求规格说明，忽略细节，只考虑主要特性，快速构造一个可运行的系统</li>
<li>原型运行与评价：软件开发人员与用户频繁通信，发现问题、消除误解的重要阶段，目的是发现新需求并修改原有需求</li>
<li>原型修正：对原型系统根据修改意见进行修正</li>
<li>判定原型完成：如果原型经过修正或改进，获得了参与者的一致认可，那么原型开发的迭代过程就可以结束</li>
</ul>
<h4 id="面向复用的软件开发模型"><a href="#面向复用的软件开发模型" class="headerlink" title="面向复用的软件开发模型"></a>面向复用的软件开发模型</h4><blockquote>
<p>需求描述 $\longrightarrow$构件分析$\longrightarrow$需求修改$\longrightarrow$使用复用的系统设计$\longrightarrow$开发和集成$\longrightarrow$系统有效性验证</p>
<p>面向复用的软件开发模型依赖于存在大量可复用的软件构建以及能组合这些构件的集成框架。有三种类型的软件构件可用于面向复用的软件开发过程：</p>
<ul>
<li>通过标准服务开发的Web服务，可用于远程调用</li>
<li>对象的集合，作为一个包和构件框架，如.NET或J2EE</li>
<li>独立的软件系统，通过配置在特定的环境下使用</li>
</ul>
</blockquote>
<ul>
<li>优点<ul>
<li>减少了需要开发的软件数量，从而降低了软件开发成本以及开发中的风险</li>
<li>可使软件快速交付</li>
</ul>
</li>
<li>缺点<ul>
<li>需求妥协是不可避免的，这可能导致一个不符合用户真正需求的系统</li>
<li>对系统进化的控制将失效，因为可复用的构件新版本可能是不受机构控制的</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/14/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="闪烁微光">
      <meta itemprop="description" content="向着高远支撑起生命和灵魂">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="闪烁微光的部落阁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/14/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">单例模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-14 15:12:39" itemprop="dateCreated datePublished" datetime="2020-04-14T15:12:39+08:00">2020-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-28 09:24:14" itemprop="dateModified" datetime="2020-04-28T09:24:14+08:00">2020-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h1><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p>​    保证一个类只有一个实例，并且提供一个访问该实例的全局访问点</p>
<h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li><p>单例模式只生成一个实例，减少了系统性能开销，当一个对象的产生需要比较多的资源时，如读取配置，产生其他依赖对象时，则可以通过在应用启动时直接产生一个单例对象，然后永久驻留内存的方式来解决</p>
</li>
<li><p>单例模式可以在系统设置全局的访问点，优化环共享资源访问，例如可以设计一个单利类，负责所有数据表的映射处理。</p>
</li>
</ul>
<h3 id="常见的五种单例模式实现方式"><a href="#常见的五种单例模式实现方式" class="headerlink" title="常见的五种单例模式实现方式"></a>常见的五种单例模式实现方式</h3><ul>
<li>主要<ul>
<li>饿汉式：线程安全，调用效率高，但不能延时加载。</li>
<li>懒汉式：线程安全、调用效率不高，但可以延时加载</li>
</ul>
</li>
<li>其他：<ul>
<li>双重检测锁式：由于JVM底层内部模型原因，偶尔会出问题，不建议使用</li>
<li>静态内部类式：线程安全，调用效率高，可以延时加载。</li>
<li>枚举单例：线程安全，调用效率高，不能延时加载。*</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//饿汉式实现</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="comment">//类初始化时立即加载对象</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton(); </span><br><span class="line">  <span class="comment">//类加载时创建对象，天然线程安全</span></span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//方法无需同步，调用效率高</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//缺点：如果只是加载类，不需要使用实例，就会造成资源浪费</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//懒汉式实现（懒加载）</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//并发效率较低</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="comment">//懒加载，真正调用时才加载</span></span><br><span class="line">    <span class="keyword">if</span>(instance == <span class="keyword">null</span>)</span><br><span class="line">      instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//双重检测锁实现</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(instance == <span class="keyword">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">synchronized</span>(Singleton<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">      </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)</span><br><span class="line">          instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//静态内部类实现，兼有并发高效调用和懒加载的优势</span></span><br><span class="line"><span class="comment">//外部类没有static属性，则不会立即加载对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonInstance</span></span></span><br><span class="line"><span class="class">  </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">//调用时才会加载静态内部类，加载时线程安全。instance有final修饰保证只有一个实例</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> SingletonInstance.instance</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//枚举方式，实现简单但是无懒加载</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Singleton</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">//一个枚举元素，代表一个实例</span></span><br><span class="line">  INSTANCE;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">singletonOperation</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="comment">//一些操作</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="补充：volatile关键字与双重检查锁"><a href="#补充：volatile关键字与双重检查锁" class="headerlink" title="补充：volatile关键字与双重检查锁"></a>补充：volatile关键字与双重检查锁</h3><p><code>voltile</code>关键字用于禁止指令重排序</p>
<p>Java中，new一个对象分为三个步骤:</p>
<ol>
<li>分配内存空间</li>
<li>初始化对象</li>
<li>将对象指向刚分配的内存空间</li>
</ol>
<p>有些编译器因为性能原因，会将第二步和第三步重排序：</p>
<ol>
<li>分配内存空间</li>
<li>将对象指向刚分配的空间</li>
<li>初始化对象</li>
</ol>
<p>这种情况下，如果不加<code>volatile</code>关键字，可能会出现以下情况：</p>
<table>
<thead>
<tr>
<th>时间轴</th>
<th>线程1</th>
<th>线程2</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>为instance分配空间</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>将instance指向内存空间</td>
<td>检测到instance不为null</td>
</tr>
<tr>
<td>3</td>
<td></td>
<td>访问instance（此时对象为空）</td>
</tr>
<tr>
<td>4</td>
<td>初始化instance</td>
<td></td>
</tr>
</tbody></table>
<p>​    这种情况下，线程2获取了一个空对象。</p>
<h3 id="防止反射和反序列化漏洞"><a href="#防止反射和反序列化漏洞" class="headerlink" title="防止反射和反序列化漏洞"></a>防止反射和反序列化漏洞</h3><p>​    通过反射和反序列化可以破解除枚举之外的实现:</p>
<h4 id="反射方式破解单例："><a href="#反射方式破解单例：" class="headerlink" title="反射方式破解单例："></a>反射方式破解单例：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function">publoc <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Excepton</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    Singleton instance = Singleton.getInstance(); <span class="comment">//已获取实例</span></span><br><span class="line">    Class&lt;Singleton&gt; clazz = Class.forName(<span class="string">"Singleton"</span>);</span><br><span class="line">    Constructor&lt;Singleton&gt; c = clazz.getDeclaredConstructor(<span class="keyword">null</span>);</span><br><span class="line">    c.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">    Singleton instance2 = c.newInstance; <span class="comment">//另一个实例</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解决方法：二次调用时，在单例构造方法中抛出异常：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(instance != <span class="keyword">null</span>)</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="反序列化方式破解单例："><a href="#反序列化方式破解单例：" class="headerlink" title="反序列化方式破解单例："></a>反序列化方式破解单例：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function">publoc <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Excepton</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    Singleton instance = Singleton.getInstance(); <span class="comment">//已获取实例</span></span><br><span class="line">    FileOutoutStream fos = <span class="keyword">new</span> FileOutPutStream(<span class="string">"./a.txt"</span>);</span><br><span class="line">    ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(fos);</span><br><span class="line">    oos.writeObject(instance);</span><br><span class="line">    oos.close();</span><br><span class="line">    fos.close();</span><br><span class="line">    </span><br><span class="line">    ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"./a.txt"</span>));</span><br><span class="line">    Singleton instance2 = (Singleton) ois.readObject();<span class="comment">//另一个实例</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解决方法：单例类中定义<code>ReadResolve()</code>方法，反序列化时直接返回单例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Object <span class="title">readResolve</span><span class="params">()</span> <span class="keyword">throws</span> ObjectStreamException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> instance</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/27/Mybatis-SpringBoot%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89TypeHandleler/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="闪烁微光">
      <meta itemprop="description" content="向着高远支撑起生命和灵魂">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="闪烁微光的部落阁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/27/Mybatis-SpringBoot%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89TypeHandleler/" class="post-title-link" itemprop="url">Mybatis + SpringBoot使用自定义TypeHandleler</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-27 19:00:23" itemprop="dateCreated datePublished" datetime="2020-02-27T19:00:23+08:00">2020-02-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-28 09:29:42" itemprop="dateModified" datetime="2020-04-28T09:29:42+08:00">2020-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Mybatis-Springboot使用自定义TypeHandler"><a href="#Mybatis-Springboot使用自定义TypeHandler" class="headerlink" title="Mybatis + Springboot使用自定义TypeHandler"></a>Mybatis + Springboot使用自定义TypeHandler</h1><pre><code>今天遇到了一个需求：要将布尔值以`char(1)`的形式存入数据库,用T表示true，F表示F,这种需求可以通过自定义TypeHandler来解决。</code></pre><h4 id="什么是TypeHandler？"><a href="#什么是TypeHandler？" class="headerlink" title="什么是TypeHandler？"></a>什么是TypeHandler？</h4><p>​    TypeHandler承担JavaType和JDBCType的相互转换，简而言之，就是数据库与一般Java程序之间不认识彼此的数据类型，TypeHandler承担了翻译的职能，提供二者的互相转换。Mybatis内部定义了许多TypeHandler，基本能够满足与数据库的一般交互。</p>
<p>​    可以通过继承BaseTypeHandler或实现TypeHandler接口来实现TypeHandler，接口定义如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Clinton Begin</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TypeHandler</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">setParameter</span><span class="params">(PreparedStatement ps, <span class="keyword">int</span> i, T parameter, JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> columnName Colunm name, when configuration &lt;code&gt;useColumnLabel&lt;/code&gt; is &lt;code&gt;false&lt;/code&gt;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function">T <span class="title">getResult</span><span class="params">(ResultSet rs, String columnName)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function">T <span class="title">getResult</span><span class="params">(ResultSet rs, <span class="keyword">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function">T <span class="title">getResult</span><span class="params">(CallableStatement cs, <span class="keyword">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>复习JDBC:</p>
<blockquote>
<h4 id="Statement-PrepredStatement和CallableStatement的区别"><a href="#Statement-PrepredStatement和CallableStatement的区别" class="headerlink" title="Statement,PrepredStatement和CallableStatement的区别:"></a>Statement,PrepredStatement和CallableStatement的区别:</h4><p>Statement适用于执行静态SQL，不支持传入参数</p>
<p>PreparedStatement适用于需要多次执行的SQL，支持传入参数</p>
<p>CallableStatement适用于访问数据库存储过程，也支持传入参数</p>
<p>后两者的SQL中，参数以<code>?</code>为占位符，参数的序号从1开始。对每种数据类型有一个set()方法</p>
<p>方法来指定SQL语句中参数的值。方法参数分别为参数序号和值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setInt</span><span class="params">(<span class="keyword">int</span> parameterIndex, <span class="keyword">int</span> x)</span> <span class="keyword">throws</span> SQLException</span>;</span><br></pre></td></tr></table></figure>

<h4 id="ResultSet相关"><a href="#ResultSet相关" class="headerlink" title="ResultSet相关:"></a>ResultSet相关:</h4><p>ResultSet中每种数据类型有两个get方法用于取得值，分别需要列名和列的索引，如</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getInt</span><span class="params">(<span class="keyword">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getInt</span><span class="params">(String columnLabel)</span> <span class="keyword">throws</span> SQLException</span>;</span><br></pre></td></tr></table></figure>


</blockquote>
<p>可见TypeHandler的功能就是转换参数为数据库类型，设定SQL语句中的参数，以及将结果集中的数据转换成Java类型。</p>
<h4 id="实现BooleanCharTypeHandler"><a href="#实现BooleanCharTypeHandler" class="headerlink" title="实现BooleanCharTypeHandler"></a>实现BooleanCharTypeHandler</h4><ul>
<li>实体类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> userId;</span><br><span class="line">    String userName;</span><br><span class="line">    String password;</span><br><span class="line">    Boolean isAdmin;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>BoleanCharHandler</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wastlandwolf.stu.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.type.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.CallableStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">//此处两个注解标识转换的类型</span></span><br><span class="line"><span class="meta">@MappedJdbcTypes</span>(JdbcType.CHAR)</span><br><span class="line"><span class="meta">@MappedTypes</span>(Boolean<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">BooleanCharTypeHandler</span> <span class="keyword">extends</span> <span class="title">BaseTypeHandler</span>&lt;<span class="title">Boolean</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="comment">//用JavaType设定SQL语句中的参数</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNonNullParameter</span><span class="params">(PreparedStatement preparedStatement, <span class="keyword">int</span> i, Boolean parameter, JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String value = parameter ? <span class="string">"T"</span> : <span class="string">"F"</span>;</span><br><span class="line">        preparedStatement.setString(i,value);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//使用列名作为参数，将结果集中的Char(1)转换为Boolean</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">getNullableResult</span><span class="params">(ResultSet resultSet, String columnName)</span> <span class="keyword">throws</span> SQLException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (resultSet.wasNull())</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> resultSet.getString(columnName).equalsIgnoreCase(<span class="string">"T"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//使用列索引作为参数，将结果集中的Char(1)转换为Boolean</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">getNullableResult</span><span class="params">(ResultSet resultSet, <span class="keyword">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(resultSet.wasNull())</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> resultSet.getString(columnIndex).equalsIgnoreCase(<span class="string">"T"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">getNullableResult</span><span class="params">(CallableStatement callableStatement, <span class="keyword">int</span> i)</span> <span class="keyword">throws</span> SQLException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(callableStatement.wasNull())</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> callableStatement.getString(i).equalsIgnoreCase(<span class="string">"T"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>部分UserMapper.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"userMapper"</span> <span class="attr">type</span>=<span class="string">"实体类全限定类名"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"userId"</span> <span class="attr">column</span>=<span class="string">"userId"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"isAdmin"</span> <span class="attr">column</span>=<span class="string">"isAdmin"</span> <span class="attr">javaType</span>=<span class="string">"Boolean"</span> <span class="attr">jdbcType</span>=<span class="string">"CHAR"</span> <span class="attr">typeHandler</span>=<span class="string">"com.wastlandwolf.stu.handler.BooleanCharTypeHandler"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"userName"</span> <span class="attr">column</span>=<span class="string">"userName"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"password"</span> <span class="attr">column</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertPo"</span> <span class="attr">parameterType</span>=<span class="string">"string"</span>&gt;</span></span><br><span class="line">        insert into stu.user</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"userId != null"</span>&gt;</span></span><br><span class="line">            userId = #&#123;userId&#125;,</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"userName != null"</span>&gt;</span></span><br><span class="line">            userName = #&#123;userName&#125;,</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"password != null"</span>&gt;</span></span><br><span class="line">            `password` = #&#123;password&#125;,</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"isAdmin != null"</span>&gt;</span></span><br><span class="line">            isAdmin = #&#123;isAdmin,typeHandler=TypeHandler全限定类名&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">resultMap</span>=<span class="string">"userMapper"</span>&gt;</span></span><br><span class="line">        select * from stu.user where userId = #&#123;userId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果有多个TypeHandler，可在SpringBoot配置文件中配置</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">type-handlers-package:</span> <span class="string">包名</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">闪烁微光</p>
  <div class="site-description" itemprop="description">向着高远支撑起生命和灵魂</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/ShimmeringLight/ShimmeringLight.github.io" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ShimmeringLight&#x2F;ShimmeringLight.github.io" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">闪烁微光</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
